# spotify2midi
このパッケージは[Spotify Web API](https://developer.spotify.com/documentation/web-api)のGet Track's Audio AnalysisでSpotify URLからMIDIファイルを作成します．

## Description
このパッケージはSpotify URLからMIDIファイルを作成します．例えば，[Twinkle Twinkle Little Star - Grand Piano Version](https://open.spotify.com/track/5Yx45WDFNYLFwj3pjtvfJ6)から[Twinkle Twinkle Little Star - Grand Piano Version.mid]()を作成します．MIDIファイルはSpotify2Midiオブジェクトのget_midiメソッドでカレントディレクトリに作成されます．get_midiメソッドは7個の引数を受け取ります．

### get_midi
* url: MIDIファイルにしたい楽曲のSpotify URLを入力します．
* name: MIDIファイルの名前を入力します．デフォルトは楽曲名です．
* path: MIDIファイルを保存するディレクトリを入力します．デフォルトはカレントディレクトリです．
* limit: 自然数もしくは0.0から1.0の実数を入力して，MIDIファイルに書き込む音符数を制限します．
  * 自然数の場合，limitは最大同時発音数として機能します．
  * 実数の場合，limitは発音確率の閾値として機能します．
* confidence: 0.0から1.0の実数を入力して，MIDIファイルに書き込むレコードの確信度を制限します．
* base_note: MIDIファイルの最も低い音を入力します．デフォルトはC4.
* offset: MIDIファイルオフセットを入力します．デフォルトは0です.

## Requirement
* [spotipy](https://spotipy.readthedocs.io)
* [numpy](https://numpy.org)
* [mido](https://mido.readthedocs.io)

## Install
```
pip install git+https://github.com/ryusei-hayashi/spotify2midi
```

## Usage
### Get Client ID and Client Secret
* [アカウントを作成](https://www.spotify.com/us/signup)します．
* [Spotify for Developers](https://developer.spotify.com/dashboard)にアクセスします．
* [アプリを作成](https://developer.spotify.com/dashboard/create)します．
* Client IDとClient Secretを取得します．

### Use spotify2midi
```
import spotify2midi
```
* Client IDとClient Secretを入力します．
* Spotify2Midiオブジェクトのインスタンスを作成します．
```
id = ## Your Client ID ##
secret = ## Your Client Secert ##
s2m = spotify2midi.Spotify2Midi(id, secret)
```
* Spotify URLを入力します．
* MIDIファイルを取得します．
```
url = ## Spotify URL ##
s2m.get_midi(url)
```

## Licence
[MIT license](https://en.wikipedia.org/wiki/MIT_License)
